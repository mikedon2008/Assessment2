<!DOCTYPE html>
<html>
<head>
   <title>MIKEDON GEOGRAPHY QUIZ - Admin Dashboard</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
   <style>
       body { background: linear-gradient(135deg, #e3f2fd, #bbdefb); font-family: Arial, sans-serif; padding: 40px; }
       
       .admin-container { max-width: 1350px; margin: 0 auto; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 15px 40px rgba(30,144,255,0.2); border: 4px solid #1e88e5; }
       
       h1 { text-align: center; color: #1565c0; font-size: 3em; margin-bottom: 10px; }

       
       .logout { text-align: center; margin-bottom: 30px; }
       
       .logout a { color: #1976d2; font-weight: bold; text-decoration: none; font-size: 1.2em; }
       
       .logout a:hover { text-decoration: underline; }
       
       h2 { text-align: center; color: #0d47a1; margin: 30px 0 20px; }
       
       table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 1.1em; }
       
       th { background: #1e88e5; color: white; padding: 15px; text-align: center; font-weight: bold; }
       
       td { padding: 14px; text-align: center; border-bottom: 1px solid #bbdefb; }
       
       tr:nth-child(even) { background-color: #f5fbff; }
       
       tr:hover { background-color: #e3f2fd; }
       
       .highlight { background-color: #e8f5e8 !important; font-weight: bold; color: #0d47a1; }
       
       .time-taken { font-weight: bold; color: #d32f2f; }
       
       .btn-make { background:#4caf50; color:white; padding:10px 18px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; }
       
       .btn-remove { background:#d32f2f; color:white; padding:10px 18px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; }
       
       .btn-disabled { background:#9e9e9e; color:#ccc; padding:10px 18px; border:none; border-radius:6px; cursor:not-allowed; }
       
   </style>
</head>
<body>
<div class="admin-container">
   <h1>Admin Dashboard</h1>
   <div class="logout">
       <a href="/logout">Logout</a>
   </div>

   <h2>All User Records</h2>

   <table>
       <tr>
           <th>#</th>
           <th>Username</th>
           <th>Score</th>
           <th>Level</th>
           <th>Date & Time</th>
           <th>Time Taken</th>
           <th>Status</th>
           <th>Action (Super Admin Only)</th>
       </tr>
       {% for record in records %}
       <tr {% if record[1] in ['nguyen.don225@education.nsw.gov.au', 'mickeydon2008@gmail.com'] %}class="highlight"{% endif %}>
           <td>{{ loop.index }}</td>
           <td>{{ record[1] }}</td>
           <td>{{ record[2] }}/10</td>
           <td>{{ record[3] }}</td>
           <td>{{ record[4] }}</td>
           <td class="time-taken">{{ record[5] }}s</td>
           <td>
               {% if record[1] == 'nguyen.don225@education.nsw.gov.au' %}
                   Super Admin (Owner)
               {% elif is_admin(record[1]) %}
                   Admin
               {% else %}
                   Regular User
               {% endif %}
           </td>
           <td>
               {% if session['username'] == 'nguyen.don225@education.nsw.gov.au' %}
                   {% if record[1] != 'nguyen.don225@education.nsw.gov.au' %}
                       {% if is_admin(record[1]) %}
                           <form method="post" action="/remove_admin/{{ record[1] }}" style="display:inline;">
                               <button type="submit" class="btn-remove">Remove Admin</button>
                           </form>
                       {% else %}
                           <form method="post" action="/make_admin/{{ record[1] }}" style="display:inline;">
                               <button type="submit" class="btn-make">Make Admin</button>
                           </form>
                       {% endif %}
                   {% else %}
                       <button class="btn-disabled" disabled>Owner</button>
                   {% endif %}
               {% else %}
                   <button class="btn-disabled" disabled>No Permission</button>
               {% endif %}
           </td>
       </tr>
       {% endfor %}
   </table>

   <br><br>
   <p style="text-align:center;">
       <a href="/userhome">
           <button style="padding:15px 40px; font-size:1.3em; background:#1e88e5; color:white; border:none; border-radius:50px; cursor:pointer;">
               Back to Dashboard
           </button>
       </a>
   </p>
</div>
</body>
</html>